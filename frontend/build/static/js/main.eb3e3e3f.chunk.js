(this["webpackJsonpimposter.io"]=this["webpackJsonpimposter.io"]||[]).push([[0],{117:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(1),i=n.n(a),c=n(66),o=n.n(c),s=(n(80),n(9)),u=n(10),l=n(12),d=n(11),b=n(2),j=n(6),f=n(30),O=n(67),p=n.n(O)()("https://imposter-backend.herokuapp.com/"),m=n(4),h=n(3);function x(){var t=Object(m.a)(["\n\ttext-decoration: underline;\n"]);return x=function(){return t},t}function v(){var t=Object(m.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\n"]);return v=function(){return t},t}function g(){var t=Object(m.a)(["\n\tdisplay: flex;\n"]);return g=function(){return t},t}function S(){var t=Object(m.a)(["\n\ttext-align: center;\n\tfont-family: 'Bitmap';\n\t\n"]);return S=function(){return t},t}function E(){var t=Object(m.a)(["\n  \n\tmin-height: 90vh;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n"]);return E=function(){return t},t}function y(){var t=Object(m.a)(["\n\tpadding: 0 30px;\n\tmargin-right: auto;\n\tmargin-left: auto;\n\t\n"]);return y=function(){return t},t}function T(){var t=Object(m.a)(["\n\tbackground: #4c4c4c;\n\tcolor: #fff;\n\tbox-shadow: 0 3px 0 #333333;\n\tborder-radius: 20em;\n\n\tmax-width: 200px;\n\n\t&:hover {\n\t\tbackground: #747373;\n\t}\n\t&:active,\n\t&:focus {\n\t\tbackground: #444444;\n\t}\n\n\t//-------\n\tborder: 2px solid transparent;\n\tbox-sizing: border-box;\n\tcursor: pointer;\n\tfont-size: 1rem;\n\tfont-weight: 700;\n\tline-height: 1;\n\tmargin: 7px;\n\tpadding: 15px 25px;\n\ttext-align: center;\n\ttext-decoration: none;\n\tdisplay: inline-block;\n\toutline: none;\n\tposition: relative;\n\ttop: 0;\n\ttext-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);\n\t-webkit-transition: all 0.2s ease-in-out 0s;\n\t-moz-transition: all 0.2s ease-in-out 0s;\n\t-ms-transition: all 0.2s ease-in-out 0s;\n\ttransition: all 0.2s ease-in-out 0s;\n\n"]);return T=function(){return t},t}var k=Object(h.a)(T()),_=h.b.button(k),N=h.b.div(y()),I=h.b.div(E()),C=h.b.h1(S()),A=(h.b.div(g()),h.b.div(v()),h.b.div(x())),R=n(13);function w(){var t=Object(m.a)(["\n    padding: 10px 12px;\n    margin: 3px;\n    border: 2px solid #fff;\n    background-color: #000;\n    border-radius: 4px;\n    color: white;\n    font-size: 1.15rem;\n\n    &:focus{\n        outline: none\n    }\n"]);return w=function(){return t},t}function B(){var t=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    max-width: 490px;\n    margin: 0 auto;\n    background: rgba(50, 50, 50, 0.5);\n    border-radius: 10px;\n    padding: 2em;\n    "]);return B=function(){return t},t}var P=h.b.div(B()),L=h.b.input(w()),G=Object(h.b)(f.b)(k);var D=function(){var t=Object(a.useState)(""),e=Object(R.a)(t,2),n=e[0],i=e[1],c=Object(a.useState)(""),o=Object(R.a)(c,2),s=o[0],u=o[1];return Object(r.jsxs)(P,{children:[Object(r.jsx)(L,{type:"text",name:"playerName",placeholder:"Name",autoComplete:"off",value:n,onChange:function(t){return i(t.target.value)}}),Object(r.jsx)(L,{type:"text",name:"roomCode",placeholder:"Room Code",autoComplete:"off",value:s,onChange:function(t){return u(t.target.value)}}),Object(r.jsx)(G,{to:{pathname:"/game/new",state:{playerName:n}},children:"Create new Lobby"}),Object(r.jsx)(G,{to:{pathname:"/game/".concat(s,"/join"),state:{playerName:n,roomCode:s}},children:"Join Lobby"})]})},M=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C,{children:" Imposter.io "}),Object(r.jsx)(N,{children:Object(r.jsx)(D,{})})]})}}]),n}(a.Component),Y=n(35);var W=function(){return console.log("LODAING MOUNTING"),Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Loading..."})})},Q=n(5);function U(){var t=Object(m.a)(["\n// STUFF TO CHANGE ---- if we want to use props\n    background: #4c4c4c;\n    color: #fff;\n    box-shadow: 0 3px 0 #333333;\n    border-radius: 20em;\n\n    max-width: 200px;\n    \n\n    &:hover {\n        background: #747373;\n    }\n    &:active,\n    &:focus {\n        background: #444444;\n    }\n\n    //-------\n    border: 2px solid transparent;\n    box-sizing: border-box;\n    cursor: pointer;\n    font-size: 1rem;\n    font-weight: 700;\n    line-height: 1;\n    margin: 7px;\n    padding: 15px 25px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    outline: none;\n    position: relative;\n    top: 0;\n    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);\n    -webkit-transition: all 0.2s ease-in-out 0s;\n    -moz-transition: all 0.2s ease-in-out 0s;\n    -ms-transition: all 0.2s ease-in-out 0s;\n    transition: all 0.2s ease-in-out 0s;\n"]);return U=function(){return t},t}function V(){var t=Object(m.a)(["\n    color: ",";\n    padding: 5px 8px;\n    border: 1px solid #000;\n    border-radius: 10px;\n    font-size: 18px;\n    margin: 3px;\n"]);return V=function(){return t},t}function z(){var t=Object(m.a)(["\n    /* border: 1px solid #000; */\n    background: #d5d4d4;\n    padding: 10px;\n    margin: 0 10px;\n    min-width: 140px;\n    border-radius: 5px;\n\n"]);return z=function(){return t},t}function H(){var t=Object(m.a)(["\n    display:flex;\n    justify-content: space-between;\n    background: #333;\n    padding: 10px;\n    color:white;\n    \n"]);return H=function(){return t},t}function K(){var t=Object(m.a)(["\n    /* border: 1px solid #000; */\n    padding: 10px;\n    background-color: #c5c5c5;\n    margin: 0 10px;\n    border-radius: 5px;\n"]);return K=function(){return t},t}function F(){var t=Object(m.a)(["\n    display:flex;\n    justify-content: center;\n    /* margin: 0 100px; */\n"]);return F=function(){return t},t}function J(){var t=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    \n    align-items: center;\n    \n"]);return J=function(){return t},t}var X=h.b.div(J()),q=h.b.div(F()),Z=h.b.div(K()),$=h.b.div(H()),tt=h.b.div(z()),et=h.b.div(V(),(function(t){return t.host?"red":"black"})),nt=h.b.button(U());var rt=function(t){var e=t.players.map((function(t){return Object(r.jsx)(et,{host:t.host,children:t.playerName},t.socketId)}));return Object(r.jsx)(tt,{children:e})},at=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsxs)(Z,{children:[Object(r.jsxs)("h2",{children:["Room Code: ",this.props.roomCode]}),Object(r.jsxs)($,{children:[Object(r.jsx)("label",{children:"Num Imposters"}),Object(r.jsxs)("select",{name:"numImposters",value:this.props.settings.numImposters,onChange:function(e){return t.props.handleSettingsChange(e)},disabled:!this.props.isHost,children:[Object(r.jsx)("option",{value:"1",children:"1"}),Object(r.jsx)("option",{value:"2",children:"2"}),Object(r.jsx)("option",{value:"3",children:"3"})]})]}),Object(r.jsxs)($,{children:[Object(r.jsx)("label",{children:"Num Tasks"}),Object(r.jsxs)("select",{name:"numTasks",value:this.props.settings.numTasks,onChange:function(e){return t.props.handleSettingsChange(e)},disabled:!this.props.isHost,children:[Object(r.jsx)("option",{value:"1",children:"1"}),Object(r.jsx)("option",{value:"2",children:"2"}),Object(r.jsx)("option",{value:"3",children:"3"}),Object(r.jsx)("option",{value:"4",children:"4"}),Object(r.jsx)("option",{value:"5",children:"5"})]})]}),Object(r.jsxs)($,{children:[Object(r.jsx)("label",{children:"Num Rounds"}),Object(r.jsxs)("select",{name:"numRounds",value:this.props.settings.numRounds,onChange:function(e){return t.props.handleSettingsChange(e)},disabled:!this.props.isHost,children:[Object(r.jsx)("option",{value:"1",children:"1"}),Object(r.jsx)("option",{value:"2",children:"2"}),Object(r.jsx)("option",{value:"3",children:"3"}),Object(r.jsx)("option",{value:"4",children:"4"}),Object(r.jsx)("option",{value:"5",children:"5"})]})]})]})}}]),n}(a.Component),it=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).emitStartGame=function(){p.emit(Q.START_GAME,t.props.roomCode)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.gameState,e=t.currPlayer,n=t.players,a=t.settings,i=null!==e&&e.host;return Object(r.jsxs)(N,{children:[Object(r.jsx)(C,{children:"Imposter.io"}),Object(r.jsxs)(X,{children:[Object(r.jsxs)(q,{children:[Object(r.jsx)(at,{roomCode:this.props.roomCode,isHost:i,settings:a,handleSettingsChange:this.props.handleSettingsChange}),Object(r.jsx)(rt,{roomCode:this.props.roomCode,currPlayer:e,players:n})]}),Object(r.jsx)(nt,{onClick:this.emitStartGame,disabled:!i,children:"Start Game"})]})]})}}]),n}(a.Component);function ct(){var t=Object(m.a)(["\n        \n    height: 25px;\n    width: 100%;\n    background: linear-gradient(to bottom, red, #900);\n\n    position: fixed;\n    left: 0;\n    bottom: 0;\n\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: linear;\n    animation-iteration-count: 1;\n    transform-origin: left center;\n    animation-fill-mode: forwards;\n"]);return ct=function(){return t},t}function ot(){var t=Object(m.a)(["\n    to {\n        transform: scaleX(0);\n    }\n"]);return ot=function(){return t},t}var st=Object(h.c)(ot()),ut=h.b.div(ct(),st,(function(t){return t.timer}));var lt=function(t){return console.log(t.timer),Object(r.jsx)(ut,{timer:t.timer})},dt=n(38);function bt(){var t=Object(m.a)(["\n    border: 1px solid black;\n"]);return bt=function(){return t},t}function jt(){var t=Object(m.a)(["\n    border: 1px solid black;\n    padding: 10px 20px;\n"]);return jt=function(){return t},t}function ft(){var t=Object(m.a)(['\n    border: 1px solid black;\n    border-collapse: collapse;\n    font-family: "Bitmap";\n']);return ft=function(){return t},t}function Ot(){var t=Object(m.a)(["\n    display: ",";\n    text-decoration: ",';\n    font-size: 1.8rem;\n    font-family: "Bitmap";\n    text-align: center;\n    padding: 5px 10px;\n    margin: 0 10px;\n    color: #cf1d1d;\n    text-shadow: 10px 10px 50px #cf1d1d;\n\n']);return Ot=function(){return t},t}function pt(){var t=Object(m.a)(["\n    display: flex;\n    justify-content: space-around;\n\n"]);return pt=function(){return t},t}function mt(){var t=Object(m.a)(['\n    font-family: "Bitmap";\n    text-decoration: underline;\n    padding: 3px;\n    color: white;\n    text-align: center;\n    font-size: 2rem;\n\n']);return mt=function(){return t},t}function ht(){var t=Object(m.a)(['\n    font-family: "Bitmap";\n    font-size: 1.5rem;\n    margin: 8px;\n    text-align: center;\n    color: white;\n']);return ht=function(){return t},t}function xt(){var t=Object(m.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    background-color: ",";\n    padding: 6px;\n    margin: 5px;\n    min-width: 110px;\n    min-height: ",';\n    \n  \n    \n    border-radius: 10px;\n    &:hover{\n        background-color: "#8af078";\n        cursor: ',";\n    }\n"]);return xt=function(){return t},t}function vt(){var t=Object(m.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    margin: 50px;\n"]);return vt=function(){return t},t}function gt(){var t=Object(m.a)(["\n    border: 1px solid #272727;\n    margin: 0 auto;\n"]);return gt=function(){return t},t}function St(){var t=Object(m.a)(["\n    display: flex;\n    align\n\n"]);return St=function(){return t},t}function Et(){var t=Object(m.a)([" \n    background-color: ",'; /* Green */\n    font-family: "Bitmap";\n    border: none;\n    color: white;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    text-decoration: none;\n    font-size: 1.5rem;\n    &:hover{\n        cursor: pointer;\n    }\n    &:focus{\n        outline: none;\n    }\n']);return Et=function(){return t},t}function yt(){var t=Object(m.a)(['\n    text-align: center;\n    font-family: "Bitmap";\n    font-size: 5rem;\n    color: ',";\n    text-shadow: 3px 3px 50px ",";\n    \n\n"]);return yt=function(){return t},t}function Tt(){var t=Object(m.a)(['\n    font-family: "Bitmap";\n    font-size: 2rem;\n    text-align: center;\n    color: black;\n\n']);return Tt=function(){return t},t}function kt(){var t=Object(m.a)(['\n    font-family: "Bitmap";\n    font-size: 2rem;\n    text-align: center;\n    color: black;\n\n']);return kt=function(){return t},t}function _t(){var t=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n"]);return _t=function(){return t},t}var Nt=h.b.div(_t()),It=h.b.h2(kt()),Ct=h.b.h3(Tt()),At=h.b.h1(yt(),(function(t){return t.imposter?"#cf1d1d":"#31dec1"}),(function(t){return t.imposter?"#cf1d1d":"#31dec1"})),Rt=h.b.button(Et(),(function(t){return t.selected?"#44a133":"#505050"})),wt=(h.b.div(St()),Object(h.b)(dt.a)(gt())),Bt=h.b.div(vt()),Pt=h.b.div(xt(),(function(t){return t.voted?"#44a133":"#505050"}),(function(t){return t.half?"55px":"110px"}),(function(t){return t.disabled?"default":"pointer"})),Lt=h.b.div(ht()),Gt=h.b.div(mt()),Dt=h.b.div(pt()),Mt=h.b.div(Ot(),(function(t){return t.hidden?"hidden":"block"}),(function(t){return t.votedOff?"line-through":"none"})),Yt=h.b.table(ft()),Wt=h.b.td(jt()),Qt=h.b.tr(bt());var Ut=function(t){var e="";return null!==t.gameState.currPlayer&&(e=t.gameState.currPlayer.imposter?"IMPOSTER":"CREWMATE"),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ct,{children:t.gameState.currPlayer.playerName}),Object(r.jsx)(At,{imposter:t.gameState.currPlayer.imposter,children:e}),Object(r.jsx)(lt,{timer:t.timer})]})},Vt=n(23),zt=n(74);var Ht=function(t){var e,n=2,i=0,c=Object(a.useRef)();return Object(a.useEffect)((function(){var e=c.current;return function(){var n={answer:e.getSaveData(),currPlayer:t.gameState.currPlayer,task:Vt.DRAWING_TASK};p.emit(Q.SEND_ANSWER,t.roomCode,n)}}),[t.gameState.currPlayer,t.roomCode]),null!==t.currQuestion&&(e=t.gameState.currPlayer.imposter?t.currQuestion.modified:t.currQuestion.original),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Nt,{children:[Object(r.jsx)(It,{children:e}),Object(r.jsx)(wt,{ref:c,hideGrid:!0,brushRadius:n,lazyRadius:i}),Object(r.jsx)(_,{onClick:function(){return c.current.undo()},children:Object(r.jsx)(zt.a,{})})]}),Object(r.jsx)(lt,{timer:t.timer})]})};var Kt=function(t){var e=Object(a.useState)(5),n=Object(R.a)(e,2),i=n[0],c=n[1],o=Object(a.useRef)(i);Object(a.useEffect)((function(){o.current=i}),[i]),Object(a.useEffect)((function(){return function(){var e={answer:o.current,currPlayer:t.gameState.currPlayer,task:Vt.NUMBERS_TASK};p.emit(Q.SEND_ANSWER,t.roomCode,e)}}),[t.gameState.currPlayer,t.roomCode]);for(var s,u=[],l=function(t){var e=Object(r.jsx)(Rt,{onClick:function(){return c(t)},selected:i===t,children:t},t);u.push(e)},d=1;d<=10;d++)l(d);return null!==t.currQuestion&&(s=t.gameState.currPlayer.imposter?"You are the imposter, pick a number and DEFEND YOUR SELF":t.currQuestion),Object(r.jsxs)(Nt,{children:[Object(r.jsx)(It,{children:s}),Object(r.jsx)("div",{children:u})]})};var Ft=function(t){return Object(r.jsx)("div",{children:"Quesiton Task"})},Jt=n(24),Xt=n.n(Jt),qt=n(22),Zt=n(37);var $t=function(t){var e=Object(a.useState)([]),n=Object(R.a)(e,2),i=n[0],c=n[1],o=Object(a.useState)([]),s=Object(R.a)(o,2),u=s[0],l=s[1];Object(a.useEffect)((function(){p.once(Q.SHOW_RESULTS,(function(e){e.sort((function(t,e){return t.finalVotes>e.finalVotes?-1:1}));var n=[],r=[],a=[];e.forEach((function(e,i){i<t.gameState.settings.numImposters?e.votedOff=!0:e.votedOff=!1,e.hidden=!0,a.push(e),e.imposter?r.push(e):n.push(e)})),c(n),l(r);var i=function(t){return new Promise((function(e){return setTimeout(e,t)}))};(function(){var t=Object(Zt.a)(Xt.a.mark((function t(){var e,n;return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Xt.a.mark((function t(e){return Xt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(2e3);case 2:l((function(t){var n=Object(qt.a)(t);return n[e]=Object(b.a)(Object(b.a)({},n[e]),{},{hidden:!1}),n}));case 3:case"end":return t.stop()}}),t)})),n=0;case 2:if(!(n<r.length)){t.next=7;break}return t.delegateYield(e(n),"t0",4);case 4:n++,t.next=2;break;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}))}),[t.gameState.settings.numImposters]);var d=u.map((function(t){return Object(r.jsx)("span",{children:Object(r.jsxs)(Mt,{hidden:t.hidden,votedOff:t.votedOff,children:[t.playerName,Object(r.jsx)("br",{}),t.finalVotes," Votes"]})},t.socketId)})),j=[];j.push(Object(r.jsx)(Wt,{children:"Player"})),j.push(Object(r.jsx)(Wt,{children:"# of Votes"}));for(var f=1;f<=t.gameState.settings.numTasks;f++)j.push(Object(r.jsxs)(Wt,{children:["Round ",f]}));j.push(Object(r.jsx)(Wt,{children:"Final Vote"})),j.push(Object(r.jsx)(Wt,{children:"Total"}));var O=i.map((function(t){var e=0,n=t.score.map((function(n,a){return e+=n,Object(r.jsx)(Wt,{children:n},"".concat(t.socketId,"-score-").concat(a))})),a=[Object(r.jsx)(Wt,{children:t.playerName},t.socketId),Object(r.jsxs)(Wt,{children:[t.finalVotes," Votes"]},"".concat(t.socketId,"-votes"))].concat(Object(qt.a)(n),[Object(r.jsx)(Wt,{children:e},"".concat(t.socketId,"-finalScore"))]);return Object(r.jsx)(Qt,{children:a},t.socketId)}));return Object(r.jsxs)(N,{children:[Object(r.jsx)(C,{children:"Results"}),Object(r.jsx)(C,{children:"Imposters"}),Object(r.jsx)(Dt,{children:d}),Object(r.jsx)(C,{children:"Scores"}),Object(r.jsxs)(Yt,{children:[Object(r.jsx)("thead",{children:j}),Object(r.jsx)("tbody",{children:O})]}),Object(r.jsx)(lt,{timer:t.timer})]})};var te=function(t){var e=120,n=120,a=null;return t.content.task===Vt.DRAWING_TASK?a=Object(r.jsx)(dt.a,{style:{border:"1px solid #272727"},hideInterface:!0,hideGrid:!0,disabled:!0,saveData:t.content.answer,canvasWidth:e,canvasHeight:n,brushRadius:0,lazyRadius:0}):t.content.task!==Vt.QUESTION_TASK&&t.content.task!==Vt.NUMBERS_TASK||(a=Object(r.jsx)(Gt,{children:t.content.answer})),null===a?Object(r.jsx)(Pt,{voted:t.voted,disabled:t.disabled,half:!0,children:Object(r.jsx)(Lt,{children:t.content.playerName})},t.key):Object(r.jsxs)(Pt,{voted:t.voted,disabled:t.disabled,children:[Object(r.jsx)(Lt,{children:t.content.playerName}),a]},t.key)};var ee=function(t){var e=Object(a.useState)(!1),n=Object(R.a)(e,2),i=n[0],c=n[1],o=Object(a.useState)([]),s=Object(R.a)(o,2),u=s[0],l=s[1],d=Object(a.useState)([]),b=Object(R.a)(d,2),j=b[0],f=b[1],O=Object(a.useRef)(j);Object(a.useEffect)((function(){return p.once(Q.SHOW_ANSWERS,(function(t){c(!0),l(t)})),function(){p.emit(Q.SEND_VOTES,t.roomCode,p.id,O.current,50,!1),p.off(Q.SHOW_ANSWERS)}}),[t.roomCode]),Object(a.useEffect)((function(){O.current=j}),[j]);var m=function(e){if(!t.gameState.currPlayer.imposter){var n=Object(qt.a)(j);n.push(e.currentTarget.dataset.vote),n.length>t.gameState.settings.numImposters&&n.shift(),O.current=n,f(n)}},h=u.map((function(e){var n={playerName:e.currPlayer.playerName,answer:e.answer,task:e.task};return Object(r.jsx)("span",{"data-vote":e.currPlayer.socketId,onClick:m,children:Object(r.jsx)(te,{voted:j.includes(e.currPlayer.socketId),content:n,disabled:t.gameState.currPlayer.imposter})},e.currPlayer.socketId)})),x="";return null!==t.currQuestion&&(x=void 0===t.currQuestion.original?t.currQuestion:t.currQuestion.original),i?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(N,{children:[Object(r.jsx)(C,{children:Object(r.jsx)(A,{children:"Crewmate Prompt"})}),Object(r.jsx)(C,{children:x}),Object(r.jsx)(Bt,{children:h})]}),Object(r.jsx)(lt,{timer:t.timer})]}):Object(r.jsx)(W,{})};var ne=function(t){var e=Object(a.useState)([]),n=Object(R.a)(e,2),i=n[0],c=n[1],o=Object(a.useRef)(i);Object(a.useEffect)((function(){return function(){p.emit(Q.SEND_VOTES,t.roomCode,p.id,o.current,100,!0)}}),[t.roomCode]),Object(a.useEffect)((function(){o.current=i}),[i]);var s=function(e){if(!t.gameState.currPlayer.imposter){var n=Object(qt.a)(i);n.push(e.currentTarget.dataset.vote),n.length>t.gameState.settings.numImposters&&n.shift(),o.current=n,c(n)}},u=t.gameState.players.map((function(e){var n={playerName:e.playerName};return Object(r.jsx)("span",{"data-vote":e.socketId,onClick:s,children:Object(r.jsx)(te,{voted:i.includes(e.socketId),content:n,disabled:t.gameState.currPlayer.imposter})},e.socketId)}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(N,{children:[Object(r.jsx)(C,{children:Object(r.jsx)(A,{children:"Final Votes"})}),Object(r.jsx)(Bt,{children:u})]}),Object(r.jsx)(lt,{timer:t.timer})]})},re=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={timer:3e3,currQuestion:null,view:{playerRole:!0,numberTask:!1,drawingTask:!1,questionTask:!1,waiting:!1,vote:!1,finalVote:!1,endGame:!1}},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;p.on(Q.SWITCH_SCREEN,(function(e,n,r){t.setState((function(t){var a=Object.assign({},t.view);return Object.keys(a).forEach((function(t){return a[t]=!1})),a[e]=!0,{timer:r-Date.now(),currQuestion:n,view:a}}))}))}},{key:"componentWillUnmount",value:function(){p.off(Q.SWITCH_SCREEN)}},{key:"render",value:function(){var t=null;return t=this.state.view.playerRole?Object(r.jsx)(Ut,Object(b.a)(Object(b.a)({},this.props),{},{currQuestion:this.state.currQuestion,timer:this.state.timer})):this.state.view.numberTask?Object(r.jsx)(Kt,Object(b.a)(Object(b.a)({},this.props),{},{currQuestion:this.state.currQuestion,timer:this.state.timer})):this.state.view.drawingTask?Object(r.jsx)(Ht,Object(b.a)(Object(b.a)({},this.props),{},{currQuestion:this.state.currQuestion,timer:this.state.timer})):this.state.view.questionTask?Object(r.jsx)(Ft,Object(b.a)(Object(b.a)({},this.props),{},{currQuestion:this.state.currQuestion,timer:this.state.timer})):this.state.view.vote?Object(r.jsx)(ee,Object(b.a)(Object(b.a)({},this.props),{},{currQuestion:this.state.currQuestion,timer:this.state.timer})):this.state.view.finalVote?Object(r.jsx)(ne,Object(b.a)(Object(b.a)({},this.props),{},{timer:this.state.timer})):this.state.view.endGame?Object(r.jsx)($t,Object(b.a)(Object(b.a)({},this.props),{},{timer:this.state.timer})):Object(r.jsx)(W,{}),Object(r.jsx)(I,{children:Object(r.jsx)("div",{children:t})})}}]),n}(a.Component),ae=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={hasError:!1},r}return Object(u.a)(n,[{key:"render",value:function(){return this.state.hasError?(console.log("caught error"),Object(r.jsx)(j.a,{to:"/"})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0}}}]),n}(a.Component),ie=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).handleSettingsChange=function(t){r.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{gameState:Object(b.a)(Object(b.a)({},e.gameState),{},{settings:Object(b.a)(Object(b.a)({},e.gameState.settings),{},Object(Y.a)({},t.target.name,t.target.value))})})}),(function(){p.emit(Q.SUBMIT_LOBBY_SETTINGS,r.props.roomCode,r.state.gameState.settings)}))},r.lobbySettingsInit=function(){var t=function(t){var e=t.find((function(t){return t.socketId===p.id}));r.setState((function(n){return Object(b.a)(Object(b.a)({},n),{},{gameState:Object(b.a)(Object(b.a)({},n.gameState),{},{players:t,currPlayer:e})})}))},e=function(t){r.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{gameState:Object(b.a)(Object(b.a)({},e.gameState),{},{settings:t})})}))};p.emit(Q.LOBBY_EXISTS,r.props.roomCode,(function(n){r.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{lobbyExists:n})}),(function(){r.state.lobbyExists&&(p.emit(Q.GET_PLAYER_LIST,r.props.roomCode,(function(e){return t(e)})),p.on(Q.UPDATE_PLAYER_LIST,(function(e){return t(e)})),p.emit(Q.GET_LOBBY_SETTINGS,r.props.roomCode,(function(t){return e(t)})),p.on(Q.UPDATE_LOBBY_SETTINGS,(function(t){return e(t)})))}))}))},r.state={lobbyExists:null,gameStarted:!1,gameState:{currPlayer:null,players:[],settings:{numImposters:1,numTasks:3,numRounds:3}}},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.lobbySettingsInit(),p.on(Q.START_GAME,(function(e,n){var r=e.find((function(t){return t.socketId===p.id}));t.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{gameStarted:!0,gameState:Object(b.a)(Object(b.a)({},t.gameState),{},{currPlayer:r,settings:n,players:e})})}))})),p.on(Q.END_GAME,(function(){t.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{gameStarted:!1})}))}))}},{key:"componentWillUnmount",value:function(){p.off(Q.START_GAME),p.off(Q.END_GAME),p.emit(Q.LEAVE_LOBBY,this.props.roomCode)}},{key:"render",value:function(){if(void 0===this.state.gameState.currPlayer)return console.log("currPlayer is undefined"),Object(r.jsx)(j.a,{to:"/"});var t=null;return null===this.state.lobbyExists?t=Object(r.jsx)(W,{}):!0===this.state.gameStarted?t=Object(r.jsx)(re,Object(b.a)(Object(b.a)({},this.props),{},{gameState:this.state.gameState})):!1===this.state.lobbyExists?t=Object(r.jsx)(j.a,{to:"/"}):!0===this.state.lobbyExists&&(t=Object(r.jsx)(it,Object(b.a)(Object(b.a)({},this.props),{},{gameState:this.state.gameState,handleSettingsChange:this.handleSettingsChange}))),Object(r.jsx)(ae,{children:t})}}]),n}(a.Component);var ce=function(){return Object(r.jsx)("button",{onClick:function(){p.emit("debug",(function(){setTimeout(console.log,1e3,"callback")})),console.log("not call back")},children:"Test Server"})},oe=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},se=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).preventError=function(t){if(void 0!==t||null!==t){var e=t.playerName,n=t.roomCode;return!(!(void 0===e||""===e)&&!(void 0===n||""===n))&&(alert("Enter a name OR Enter Valid Room Code"),!0)}return!0},t.joinLobby=function(e,n){if(t.preventError(e))return Object(r.jsx)(j.a,{to:"/"});var a=e.roomCode,i=e.playerName;return p.emit(n,a,i),Object(r.jsx)(j.a,{to:{pathname:"/game/".concat(a),state:{roomCode:a,playerName:i}}})},t.verifyProps=function(t,e){return void 0===t?Object(r.jsx)(j.a,{to:"/"}):Object(r.jsx)(e,Object(b.a)({},t))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){p.on("disconnect",(function(){alert("Server disconnected! Check your net connection"),window.location="/"}))}},{key:"render",value:function(){var t=this;return Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{exact:!0,path:"/",component:M}),Object(r.jsx)(j.b,{exact:!0,path:"/game/new",render:function(e){var n=Object(b.a)(Object(b.a)({},e.location.state),{},{roomCode:oe()});return t.joinLobby(n,Q.CREATE_AND_JOIN_LOBBY)}}),Object(r.jsx)(j.b,{exact:!0,path:"/game/:id/join",render:function(e){return t.joinLobby(e.location.state,Q.JOIN_LOBBY)}}),Object(r.jsx)(j.b,{exact:!0,path:"/game/:roomCode",render:function(e){return t.verifyProps(e.location.state,ie)}})]}),Object(r.jsx)(ce,{})]})}}]),n}(a.Component),ue=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(se,{})}}]),n}(a.Component);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(ue,{})}),document.getElementById("root"))},23:function(t,e){t.exports={PLAYER_ROLE:"playerRole",NUMBERS_TASK:"numberTask",DRAWING_TASK:"drawingTask",QUESTION_TASK:"questionTask",VOTE:"vote",FINAL_VOTE:"finalVote",ENDGAME:"endGame"}},5:function(t,e){t.exports={IO_DISCONNECT:"disconnect",IO_DISCONNECTING:"disconnecting",CREATE_AND_JOIN_LOBBY:"CREATE_AND_JOIN_LOBBY",JOIN_LOBBY:"JOIN_LOBBY",LEAVE_LOBBY:"LEAVE_LOBBY",UPDATE_PLAYER_LIST:"UPDATE_PLAYER_LIST",LOBBY_EXISTS:"LOBBY_EXISTS",GET_PLAYER_LIST:"GET_PLAYER_LIST",GET_LOBBY_SETTINGS:"GET_LOBBY_SETTINGS",UPDATE_LOBBY_SETTINGS:"UPDATE_LOBBY_SETTINGS",SUBMIT_LOBBY_SETTINGS:"SUBMIT_LOBBY_SETTINGS",PICK_IMPOSTERS:"PICK_IMPOSTERS",GET_IMPOSTERS:"GET_IMPOSTERS",START_GAME:"START_GAME",PICK_RANDOM_TASK:"PICK_RANDOM_TASK",SWITCH_SCREEN:"SWITCH_SCREEN",SEND_ANSWER:"SEND_ANSWER",SHOW_ANSWERS:"SHOW_ANSWERS",SEND_VOTES:"SEND_VOTES",SHOW_RESULTS:"SHOW_RESULTS",END_GAME:"END_GAME"}},80:function(t,e,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.eb3e3e3f.chunk.js.map